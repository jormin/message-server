(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c7c"],{OQMk:function(e,t,a){"use strict";a.r(t);var n=a("t3Un");var l={name:"userList",filters:{statusFilter:function(e){return{published:"success",draft:"info",deleted:"danger"}[e]}},data:function(){return{list:null,total:0,totalPage:0,currentPage:1,listLoading:!0,listQuery:{page:0,limit:15,name:"",gender:"",phone:"",title:"",email:""},rules:{phone:[{validator:function(e,t,a){""===t||/^1[3456789]\d{9}$/.test(t)?a():a(new Error("请输入正确格式的手机号码"))}}],email:[{validator:function(e,t,a){""===t||/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t)?a():a(new Error("请输入正确格式的邮箱"))}}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,function(e){return Object(n.a)({url:"/user/index",method:"get",params:e})}(this.listQuery).then(function(t){e.list=t.data.items,e.total=parseInt(t.data.total),e.totalPage=parseInt(t.data.totalPage),e.currentPage=parseInt(t.data.currentPage+1),e.listLoading=!1})},changeStatus:function(e,t){var a=this,l=1===t?"启用":"禁用";this.$confirm("确定"+l+"该用户?","操作确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e,t){return Object(n.a)({url:"/user/changeStatus",method:"get",params:{id:e,userStatus:t}})})(e,t).then(function(e){a.$message({message:l+"成功",type:"success"}),a.getList()})}).catch(function(){})},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e-1,this.getList()}}},s=(a("stpr"),a("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"listQuery",staticClass:"demo-ruleForm",attrs:{inline:!0,model:e.listQuery,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"gender"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.listQuery.gender,callback:function(t){e.$set(e.listQuery,"gender",t)},expression:"listQuery.gender"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"gender"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.listQuery.gender,callback:function(t){e.$set(e.listQuery,"gender",t)},expression:"listQuery.gender"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120px",align:"center",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80px",align:"center",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.gender))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120px",align:"center",label:"手机号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"260px",align:"center",label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1"===t.row.email_verify?"已认证":"未认证")+" - "+e._s(t.row.email))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80px",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1"===t.row.status?"启用":"禁用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160px",align:"center",label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.created_at))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",label:"注册IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ip)+" - "+e._s(t.row.ip_address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===t.row.status,expression:"scope.row.status === '1'"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){e.changeStatus(t.row.id,-1)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"-1"===t.row.status,expression:"scope.row.status === '-1'"}],attrs:{type:"success",size:"mini"},on:{click:function(a){e.changeStatus(t.row.id,1)}}},[e._v("启用")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[15,30,50],"page-size":e.listQuery.limit,total:e.total,"page-count":e.totalPage,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},[],!1,null,"26c45ca6",null);r.options.__file="list.vue";t.default=r.exports},q7d2:function(e,t,a){},stpr:function(e,t,a){"use strict";var n=a("q7d2");a.n(n).a}}]);