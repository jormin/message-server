(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-79a6"],{"+XIe":function(e,t,n){},biRg:function(e,t,n){"use strict";n.r(t);var a=n("xEMq"),l={name:"messageList",filters:{statusFilter:function(e){return{published:"success",draft:"info",deleted:"danger"}[e]}},data:function(){return{list:null,total:0,totalPage:0,currentPage:1,listLoading:!0,listQuery:{page:0,limit:15,name:"",gender:"",phone:"",title:"",email:""},rules:{phone:[{validator:function(e,t,n){""===t||/^1[3456789]\d{9}$/.test(t)?n():n(new Error("请输入正确格式的手机号码"))}}],email:[{validator:function(e,t,n){""===t||/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t)?n():n(new Error("请输入正确格式的邮箱"))}}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(a.b)(this.listQuery).then(function(t){e.list=t.data.items,e.total=parseInt(t.data.total),e.totalPage=parseInt(t.data.totalPage),e.currentPage=parseInt(t.data.currentPage+1),e.listLoading=!1})},deleteMessage:function(e){var t=this;this.$confirm("确定删除该条留言?","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)(e).then(function(e){t.$message({message:"删除成功",type:"success"}),t.getList()})}).catch(function(){})},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e-1,this.getList()}}},r=(n("dfcr"),n("KHd+")),i=Object(r.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"listQuery",staticClass:"demo-ruleForm",attrs:{inline:!0,model:e.listQuery,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{placeholder:"姓名"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"gender"}},[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.listQuery.gender,callback:function(t){e.$set(e.listQuery,"gender",t)},expression:"listQuery.gender"}},[n("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),n("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{prop:"phone"}},[n("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"email"}},[n("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")])],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),n("el-table-column",{attrs:{"min-width":"200px",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{staticClass:"link-type",attrs:{to:"/message/detail/"+t.row.id}},[n("span",[e._v(e._s(t.row.title))])])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120px",align:"center",label:"留言者"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.sender))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120px",align:"center",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.gender))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120px",align:"center",label:"接收者"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.receiver))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120px",align:"center",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.attachment?"有":"无"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180px",align:"center",label:"留言时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.created_at))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:"/message/detail/"+t.row.id}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("查看")])],1),e._v(" "),n("router-link",{attrs:{to:"/message/comments/"+t.row.id}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("评论")])],1),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deleteMessage(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[15,30,50],"page-size":e.listQuery.limit,total:e.total,"page-count":e.totalPage,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},[],!1,null,"111c02b2",null);i.options.__file="list.vue";t.default=i.exports},dfcr:function(e,t,n){"use strict";var a=n("+XIe");n.n(a).a},xEMq:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i});var a=n("t3Un");function l(e){return Object(a.a)({url:"/message/index",method:"get",params:e})}function r(e){return Object(a.a)({url:"/message/detail",method:"get",params:{id:e}})}function i(e){return Object(a.a)({url:"/message/delete",method:"get",params:{id:e}})}}}]);