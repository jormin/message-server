[2018-10-18 09:35:31] SD.ERROR: WORKER Error Undefined variable: name (/home/vagrant/code/message/src/app/Controllers/Api/Backend/AuthController.php:40) [] []
[2018-10-18 09:35:31] SD.ERROR: [mysql]:Column 'username' cannot be null[sql]:INSERT xieqiaomin_admin SET username = NULL, password = '$2y$10$c.kprDpDQASZQI/4hFuEsO6Snoun.HHL96bU1rOCN7Za0A7q.2Fta', salt = 'kHJE3TDnWR', token = '', token_expiretime = '0', created_at = '1539826531' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Backend\\AuthController::actionLogin","app\\Controllers\\Api\\Backend\\AuthController::onExceptionHandle"],"start_time":"2018-10-18 09:35:30","request_id":"15398265313239905497","controller_name":"Api\\Backend\\AuthController","method_name":"Api\\Backend\\AuthController::actionLogin","ip":"192.168.10.10"} []
[2018-10-18 09:35:56] SD.ERROR: WORKER Error Undefined variable: name (/home/vagrant/code/message/src/app/Controllers/Api/Backend/AuthController.php:40) [] []
[2018-10-18 09:35:56] SD.ERROR: [mysql]:Column 'username' cannot be null[sql]:INSERT xieqiaomin_admin SET username = NULL, password = '$2y$10$T05dQLSMu5pkx8wv2gxCju0gdxaxTI5i6LK/Qmgcmnx5FzcQZeYhG', salt = 'X1gDyMbItc', token = '', token_expiretime = '0', created_at = '1539826556' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Backend\\AuthController::actionLogin","app\\Controllers\\Api\\Backend\\AuthController::onExceptionHandle"],"start_time":"2018-10-18 09:35:56","request_id":"15398265563789649742","controller_name":"Api\\Backend\\AuthController","method_name":"Api\\Backend\\AuthController::actionLogin","ip":"192.168.10.10"} []
[2018-10-18 09:36:49] SD.ERROR: [mysql]:Duplicate entry 'admin' for key 'index_username'[sql]:INSERT xieqiaomin_admin SET username = 'admin', password = '$2y$10$r75upvRXbZNVktwTMeda3.sbOFyq0zy7bD0/E.yY22zprp.0swXae', salt = 'PbHZmmcHlF', token = '', token_expiretime = '0', created_at = '1539826609' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Backend\\AuthController::actionLogin","app\\Controllers\\Api\\Backend\\AuthController::onExceptionHandle"],"start_time":"2018-10-18 09:36:49","request_id":"1539826609142725026","controller_name":"Api\\Backend\\AuthController","method_name":"Api\\Backend\\AuthController::actionLogin","ip":"192.168.10.10"} []
[2018-10-18 09:36:57] SD.ERROR: [mysql]:Duplicate entry 'admin' for key 'index_username'[sql]:INSERT xieqiaomin_admin SET username = 'admin', password = '$2y$10$oFSBHLILB9CABzo2gHUOAOPgESFByanQukyf0C0Td3IIH5Vpe.GI6', salt = 'BtX3SaDlVv', token = '', token_expiretime = '0', created_at = '1539826617' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Backend\\AuthController::actionLogin","app\\Controllers\\Api\\Backend\\AuthController::onExceptionHandle"],"start_time":"2018-10-18 09:36:57","request_id":"1539826617955447326","controller_name":"Api\\Backend\\AuthController","method_name":"Api\\Backend\\AuthController::actionLogin","ip":"192.168.10.10"} []
[2018-10-18 10:59:26] SD.ERROR: WORKER EXIT UNEXPECTED Uncaught Error: Cannot use object of type Generator as array in /home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:60 Stack trace: #0 /home/vagrant/code/message/src/app/Controllers/Api/Backend/MessageController.php(67): app\Controllers\Api\BaseController->autoReturn(Object(Generator)) #1 [internal function]: app\Controllers\Api\Backend\MessageController->actionDetail() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Components/AOP/Proxy.php(31): call_user_func_array(Array, Array) #3 [internal function]: Server\Components\AOP\Proxy->__call('actionDetail', Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Controller.php(163): call_user_func(Array) #5 [internal function]: Server\CoreBase\Controller->execute('Api\\Backend\\Mes...', 'actionDetail', NULL) #6 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(95): Generator->send(NULL) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistrib (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:60) Stack trace: #0 unknown(0): app\AppServer->checkErrors()  [] []
[2018-10-18 10:59:26] SD.ALERT: WORKER Error {"worker_id":3,"worker_pid":6869,"exit_code":255} [] []
[2018-10-18 12:02:17] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:17] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:17] SD.ERROR: [mysql]:You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by m.created_at desc' at line 7[sql]:             select count(*) as total             from xieqiaomin_message m              left join xieqiaomin_message_attachment ma on m.id = ma.message_id              left join xieqiaomin_attachment a on a.id = ma.attachment_id              left join xieqiaomin_user su on m.user_id = su.id              left join xieqiaomin_user ru on m.receiver_id = ru.id          where m.deleted_at = 0 and Array) order by m.created_at desc; #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\MessageController::setRequestResponse","app\\Controllers\\Api\\Backend\\MessageController::actionIndex","app\\Services\\MessageService::searchMessages","app\\Models\\MessageModel::searchMessages","app\\Controllers\\Api\\Backend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 12:02:17","request_id":"153983533785655893","controller_name":"Api\\Backend\\MessageController","method_name":"Api\\Backend\\MessageController::actionIndex","ip":"192.168.10.10"} []
[2018-10-18 12:02:17] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:17] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:17] SD.ERROR: [mysql]:You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by m.created_at desc' at line 7[sql]:             select count(*) as total             from xieqiaomin_message m              left join xieqiaomin_message_attachment ma on m.id = ma.message_id              left join xieqiaomin_attachment a on a.id = ma.attachment_id              left join xieqiaomin_user su on m.user_id = su.id              left join xieqiaomin_user ru on m.receiver_id = ru.id          where m.deleted_at = 0 and Array) order by m.created_at desc; #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\MessageController::setRequestResponse","app\\Models\\AdminModel::findByToken","app\\Controllers\\Api\\Backend\\MessageController::actionIndex","app\\Services\\MessageService::searchMessages","app\\Models\\MessageModel::searchMessages","app\\Controllers\\Api\\Backend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 12:02:17","request_id":"15398353373302792085","controller_name":"Api\\Backend\\MessageController","method_name":"Api\\Backend\\MessageController::actionIndex","ip":"192.168.10.10"} []
[2018-10-18 12:02:44] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:44] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:44] SD.ERROR: [mysql]:You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by m.created_at desc' at line 7[sql]:             select count(*) as total             from xieqiaomin_message m              left join xieqiaomin_message_attachment ma on m.id = ma.message_id              left join xieqiaomin_attachment a on a.id = ma.attachment_id              left join xieqiaomin_user su on m.user_id = su.id              left join xieqiaomin_user ru on m.receiver_id = ru.id          where m.deleted_at = 0 and Array) order by m.created_at desc; #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\MessageController::setRequestResponse","app\\Controllers\\Api\\Backend\\MessageController::actionIndex","app\\Services\\MessageService::searchMessages","app\\Models\\MessageModel::searchMessages","app\\Controllers\\Api\\Backend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 12:02:43","request_id":"1539835363914902015","controller_name":"Api\\Backend\\MessageController","method_name":"Api\\Backend\\MessageController::actionIndex","ip":"192.168.10.10"} []
[2018-10-18 12:02:44] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:44] SD.ERROR: WORKER Error Array to string conversion (/home/vagrant/code/message/src/app/Models/MessageModel.php:95) [] []
[2018-10-18 12:02:44] SD.ERROR: [mysql]:You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by m.created_at desc' at line 7[sql]:             select count(*) as total             from xieqiaomin_message m              left join xieqiaomin_message_attachment ma on m.id = ma.message_id              left join xieqiaomin_attachment a on a.id = ma.attachment_id              left join xieqiaomin_user su on m.user_id = su.id              left join xieqiaomin_user ru on m.receiver_id = ru.id          where m.deleted_at = 0 and Array) order by m.created_at desc; #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\MessageController::setRequestResponse","app\\Models\\AdminModel::findByToken","app\\Controllers\\Api\\Backend\\MessageController::actionIndex","app\\Services\\MessageService::searchMessages","app\\Models\\MessageModel::searchMessages","app\\Controllers\\Api\\Backend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 12:02:44","request_id":"15398353643219444201","controller_name":"Api\\Backend\\MessageController","method_name":"Api\\Backend\\MessageController::actionIndex","ip":"192.168.10.10"} []
[2018-10-18 12:03:38] SD.ERROR: [mysql]:You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by m.created_at desc' at line 7[sql]:             select count(*) as total             from xieqiaomin_message m              left join xieqiaomin_message_attachment ma on m.id = ma.message_id              left join xieqiaomin_attachment a on a.id = ma.attachment_id              left join xieqiaomin_user su on m.user_id = su.id              left join xieqiaomin_user ru on m.receiver_id = ru.id          where m.deleted_at = 0) order by m.created_at desc; #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\MessageController::setRequestResponse","app\\Controllers\\Api\\Backend\\MessageController::actionIndex","app\\Services\\MessageService::searchMessages","app\\Models\\MessageModel::searchMessages","app\\Controllers\\Api\\Backend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 12:03:38","request_id":"15398354182567844705","controller_name":"Api\\Backend\\MessageController","method_name":"Api\\Backend\\MessageController::actionIndex","ip":"192.168.10.10"} []
[2018-10-18 12:03:39] SD.ERROR: [mysql]:You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by m.created_at desc' at line 7[sql]:             select count(*) as total             from xieqiaomin_message m              left join xieqiaomin_message_attachment ma on m.id = ma.message_id              left join xieqiaomin_attachment a on a.id = ma.attachment_id              left join xieqiaomin_user su on m.user_id = su.id              left join xieqiaomin_user ru on m.receiver_id = ru.id          where m.deleted_at = 0) order by m.created_at desc; #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\MessageController::setRequestResponse","app\\Models\\AdminModel::findByToken","app\\Controllers\\Api\\Backend\\MessageController::actionIndex","app\\Services\\MessageService::searchMessages","app\\Models\\MessageModel::searchMessages","app\\Controllers\\Api\\Backend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 12:03:38","request_id":"153983541956939548","controller_name":"Api\\Backend\\MessageController","method_name":"Api\\Backend\\MessageController::actionIndex","ip":"192.168.10.10"} []
[2018-10-18 13:19:56] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 13:19:56] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 13:19:58] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 13:20:06] SD.ERROR: WORKER Error Undefined index: title (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 13:20:06] SD.ERROR: WORKER Error Undefined index: content (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 13:29:33] SD.ERROR: WORKER Error Undefined index: title (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 13:29:33] SD.ERROR: WORKER Error Undefined index: content (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 14:42:49] SD.ERROR: class SMSJob is not exist #0 /home/vagrant/code/message/src/app/Loaders/CustomLoader.php(77): app\Factories\ServiceFactory->getService('SMSJob') #1 /home/vagrant/code/message/src/app/Services/AuthService.php(48): app\Loaders\CustomLoader->job('SMSJob', Object(app\Services\AuthService)) #2 /home/vagrant/code/message/src/app/Loaders/CustomLoader.php(51): app\Services\AuthService->initialization(Array) #3 /home/vagrant/code/message/src/app/Controllers/Api/Frontend/AuthController.php(27): app\Loaders\CustomLoader->service('AuthService', Object(app\Controllers\Api\Frontend\AuthController)) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Controller.php(161): app\Controllers\Api\Frontend\AuthController->initialization('Api\\Frontend\\Au...', 'actionRegisterC...') #5 [internal function]: Server\CoreBase\Controller->execute('Api\\Frontend\\Au...', 'actionRegisterC...', NULL) #6 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(59): Generator->current() #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(64): Server\Coroutine\CoroutineTask->run() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(64): Server\Coroutine\CoroutineTask->run() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(96): Server\Coroutine\CoroutineTask->run() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(84): Server\Coroutine\CoroutineTask->run() #11 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(84): Server\Coroutine\CoroutineTask->run() #12 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(84): Server\Coroutine\CoroutineTask->run() #13 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(64): Server\Coroutine\CoroutineTask->run() #14 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/Coroutine.php(161): Server\Coroutine\CoroutineTask->run() #15 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/Coroutine.php(123): Server\Coroutine\Coroutine->start(Object(Generator)) #16 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleHttpServer.php(157): Server\Coroutine\Coroutine::startCoroutine(Object(Closure)) #17 [internal function]: Server\SwooleHttpServer->onSwooleRequest(Object(swoole_http_request), Object(swoole_http_response)) #18 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #19 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #20 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #21 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #22 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #23 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Frontend\\AuthController::onExceptionHandle"],"start_time":"2018-10-18 14:42:49","request_id":"15398449694240799484","controller_name":"Api\\Frontend\\AuthController","method_name":"Api\\Frontend\\AuthController::actionRegisterCode","ip":"192.168.10.10"} []
[2018-10-18 14:46:03] SD.ERROR: class SMSJob is not exist #0 /home/vagrant/code/message/src/app/Loaders/CustomLoader.php(77): app\Factories\ServiceFactory->getService('SMSJob') #1 /home/vagrant/code/message/src/app/Services/AuthService.php(48): app\Loaders\CustomLoader->job('SMSJob', Object(app\Services\AuthService)) #2 /home/vagrant/code/message/src/app/Loaders/CustomLoader.php(51): app\Services\AuthService->initialization(Array) #3 /home/vagrant/code/message/src/app/Controllers/Api/Frontend/AuthController.php(28): app\Loaders\CustomLoader->service('AuthService', Object(app\Controllers\Api\Frontend\AuthController)) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Controller.php(161): app\Controllers\Api\Frontend\AuthController->initialization('Api\\Frontend\\Au...', 'actionRegisterC...') #5 [internal function]: Server\CoreBase\Controller->execute('Api\\Frontend\\Au...', 'actionRegisterC...', NULL) #6 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(59): Generator->current() #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(64): Server\Coroutine\CoroutineTask->run() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(64): Server\Coroutine\CoroutineTask->run() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(96): Server\Coroutine\CoroutineTask->run() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(84): Server\Coroutine\CoroutineTask->run() #11 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(84): Server\Coroutine\CoroutineTask->run() #12 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(84): Server\Coroutine\CoroutineTask->run() #13 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(64): Server\Coroutine\CoroutineTask->run() #14 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/Coroutine.php(161): Server\Coroutine\CoroutineTask->run() #15 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/Coroutine.php(123): Server\Coroutine\Coroutine->start(Object(Generator)) #16 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleHttpServer.php(157): Server\Coroutine\Coroutine::startCoroutine(Object(Closure)) #17 [internal function]: Server\SwooleHttpServer->onSwooleRequest(Object(swoole_http_request), Object(swoole_http_response)) #18 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #19 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #20 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #21 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #22 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #23 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Frontend\\AuthController::onExceptionHandle"],"start_time":"2018-10-18 14:46:03","request_id":"1539845163829229011","controller_name":"Api\\Frontend\\AuthController","method_name":"Api\\Frontend\\AuthController::actionRegisterCode","ip":"192.168.10.10"} []
[2018-10-18 14:48:24] SD.ERROR: WORKER EXIT UNEXPECTED Uncaught Error: Call to undefined method app\Jobs\SMSJob::onAddChild() in /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Child.php:57 Stack trace: #0 /home/vagrant/code/message/src/app/Loaders/CustomLoader.php(81): Server\CoreBase\Child->addChild(Object(app\Jobs\SMSJob)) #1 /home/vagrant/code/message/src/app/Services/AuthService.php(48): app\Loaders\CustomLoader->job('SMSJob', Object(app\Services\AuthService)) #2 /home/vagrant/code/message/src/app/Loaders/CustomLoader.php(54): app\Services\AuthService->initialization(Array) #3 /home/vagrant/code/message/src/app/Controllers/Api/Frontend/AuthController.php(28): app\Loaders\CustomLoader->service('AuthService', Object(app\Controllers\Api\Frontend\AuthController)) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Controller.php(161): app\Controllers\Api\Frontend\AuthController->initialization('Api\\Frontend\\Au...', 'actionRegisterC...') #5 [internal function]: Server\CoreBase\Controller->execute('Api\\ (/home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Child.php:57) Stack trace: #0 unknown(0): app\AppServer->checkErrors()  [] []
[2018-10-18 14:48:24] SD.ALERT: WORKER Error {"worker_id":3,"worker_pid":16324,"exit_code":255} [] []
[2018-10-18 14:49:12] SD.ERROR: WORKER Error Undefined property: app\Jobs\SMSJob::$args (/home/vagrant/code/message/src/app/Jobs/SMSJob.php:30) [] []
[2018-10-18 14:49:12] SD.ERROR: WORKER Error Undefined property: app\Jobs\SMSJob::$args (/home/vagrant/code/message/src/app/Jobs/SMSJob.php:31) [] []
[2018-10-18 14:49:12] SD.ERROR: WORKER Error Undefined property: app\Jobs\SMSJob::$args (/home/vagrant/code/message/src/app/Jobs/SMSJob.php:32) [] []
[2018-10-18 15:47:50] SD.ERROR: WORKER Error Undefined property: app\AppServer::$this (/home/vagrant/code/message/src/app/Traits/SMSTrait.php:25) [] []
[2018-10-18 15:47:50] SD.ERROR: WORKER EXIT UNEXPECTED Uncaught Error: Call to a member function getParam() on null in /home/vagrant/code/message/src/app/Traits/SMSTrait.php:25 Stack trace: #0 /home/vagrant/code/message/src/app/Services/AuthService.php(67): app\Services\BaseService->sendSms(0, '17792738795', Array) #1 [internal function]: app\Services\AuthService->sendRegisterCode('17792738795') #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(95): Generator->send(Array) #3 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(74): Server\Coroutine\CoroutineTask->run() #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #6 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #7 /home/vag (/home/vagrant/code/message/src/app/Traits/SMSTrait.php:25) Stack trace: #0 unknown(0): app\AppServer->checkErrors()  [] []
[2018-10-18 15:47:50] SD.ALERT: WORKER Error {"worker_id":3,"worker_pid":31945,"exit_code":255} [] []
[2018-10-18 15:49:10] SD.ERROR: WORKER EXIT UNEXPECTED Trait method getConfig has not been applied, because there are collisions with other trait methods on app\Services\BaseService (/home/vagrant/code/message/src/app/Services/BaseService.php:17) Stack trace: #0 unknown(0): app\AppServer->checkErrors()  [] []
[2018-10-18 15:49:10] SD.ALERT: WORKER Error {"worker_id":3,"worker_pid":32083,"exit_code":255} [] []
[2018-10-18 15:50:26] SD.INFO: 短信发送结果：{"success":false,"message":"\u6a21\u677f\u4e0d\u5408\u6cd5(\u4e0d\u5b58\u5728\u6216\u88ab\u62c9\u9ed1)","data":{"Message":"\u6a21\u677f\u4e0d\u5408\u6cd5(\u4e0d\u5b58\u5728\u6216\u88ab\u62c9\u9ed1)","RequestId":"325EAEC4-7181-402E-A829-9AEA6031F163","Code":"isv.SMS_TEMPLATE_ILLEGAL"}} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Frontend\\AuthController::actionRegisterCode","app\\Services\\AuthService::sendRegisterCode","app\\Models\\UserModel::findByPhone","app\\Models\\PhoneCodeModel::insertCode","app\\Services\\SMSService::sendSms"],"start_time":"2018-10-18 15:50:26","request_id":"15398490263186258070","controller_name":"Api\\Frontend\\AuthController","method_name":"Api\\Frontend\\AuthController::actionRegisterCode","ip":"192.168.10.10"} []
[2018-10-18 15:50:26] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/SMSService.php:32) [] []
[2018-10-18 15:51:00] SD.INFO: 短信发送结果：{"success":false,"message":"\u6a21\u677f\u4e0d\u5408\u6cd5(\u4e0d\u5b58\u5728\u6216\u88ab\u62c9\u9ed1)","data":{"Message":"\u6a21\u677f\u4e0d\u5408\u6cd5(\u4e0d\u5b58\u5728\u6216\u88ab\u62c9\u9ed1)","RequestId":"C48C64D1-D0E6-4FC1-B50F-C8263AAADA5B","Code":"isv.SMS_TEMPLATE_ILLEGAL"}} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\AuthController::setRequestResponse","app\\Controllers\\Api\\Frontend\\AuthController::actionRegisterCode","app\\Services\\AuthService::sendRegisterCode","app\\Models\\UserModel::findByPhone","app\\Models\\PhoneCodeModel::insertCode","app\\Services\\SMSService::sendSms"],"start_time":"2018-10-18 15:51:00","request_id":"15398490603799159536","controller_name":"Api\\Frontend\\AuthController","method_name":"Api\\Frontend\\AuthController::actionRegisterCode","ip":"192.168.10.10"} []
[2018-10-18 15:51:00] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/SMSService.php:32) [] []
[2018-10-18 16:01:12] SD.ERROR: WORKER Error Undefined index: success (/home/vagrant/code/message/src/app/Services/AuthService.php:71) [] []
[2018-10-18 16:02:44] SD.ERROR: [mysql]:Incorrect integer value: 'token_expiretime+1800' for column 'token_expiretime' at row 1[sql]:UPDATE xieqiaomin_user SET token_expiretime = 'token_expiretime+1800' WHERE token = '$2y$10$IjoeIwGHfVneKNG2XzQC3eJVt81SHpJ9eRsP3LLIGEpfp4WjkVcrS' AND token_expiretime > '1539849764' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\AccountController::setRequestResponse","app\\Models\\UserModel::findByToken","app\\Models\\UserModel::extendTokenExpiretime","app\\Controllers\\Api\\Frontend\\AccountController::onExceptionHandle"],"start_time":"2018-10-18 16:02:44","request_id":"15398497641897501765","controller_name":"Api\\Frontend\\AccountController","method_name":"Api\\Frontend\\AccountController::actionInfo","ip":"192.168.10.10"} []
[2018-10-18 16:02:45] SD.ERROR: [mysql]:Incorrect integer value: 'token_expiretime+1800' for column 'token_expiretime' at row 1[sql]:UPDATE xieqiaomin_user SET token_expiretime = 'token_expiretime+1800' WHERE token = '$2y$10$IjoeIwGHfVneKNG2XzQC3eJVt81SHpJ9eRsP3LLIGEpfp4WjkVcrS' AND token_expiretime > '1539849765' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\MessageController::setRequestResponse","app\\Models\\UserModel::findByToken","app\\Models\\UserModel::extendTokenExpiretime","app\\Controllers\\Api\\Frontend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 16:02:44","request_id":"1539849765577039501","controller_name":"Api\\Frontend\\MessageController","method_name":"Api\\Frontend\\MessageController::actionCommonMessages","ip":"192.168.10.10"} []
[2018-10-18 16:03:00] SD.ERROR: [mysql]:Incorrect integer value: 'token_expiretime+1800' for column 'token_expiretime' at row 1[sql]:UPDATE xieqiaomin_user SET token_expiretime = 'token_expiretime+1800' WHERE token = '$2y$10$IjoeIwGHfVneKNG2XzQC3eJVt81SHpJ9eRsP3LLIGEpfp4WjkVcrS' AND token_expiretime > '1539849780' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\AccountController::setRequestResponse","app\\Models\\UserModel::findByToken","app\\Models\\UserModel::extendTokenExpiretime","app\\Controllers\\Api\\Frontend\\AccountController::onExceptionHandle"],"start_time":"2018-10-18 16:03:00","request_id":"15398497802942781627","controller_name":"Api\\Frontend\\AccountController","method_name":"Api\\Frontend\\AccountController::actionInfo","ip":"192.168.10.10"} []
[2018-10-18 16:03:00] SD.ERROR: [mysql]:Incorrect integer value: 'token_expiretime+1800' for column 'token_expiretime' at row 1[sql]:UPDATE xieqiaomin_user SET token_expiretime = 'token_expiretime+1800' WHERE token = '$2y$10$IjoeIwGHfVneKNG2XzQC3eJVt81SHpJ9eRsP3LLIGEpfp4WjkVcrS' AND token_expiretime > '1539849780' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Frontend\\MessageController::setRequestResponse","app\\Models\\UserModel::findByToken","app\\Models\\UserModel::extendTokenExpiretime","app\\Controllers\\Api\\Frontend\\MessageController::onExceptionHandle"],"start_time":"2018-10-18 16:03:00","request_id":"15398497804038141631","controller_name":"Api\\Frontend\\MessageController","method_name":"Api\\Frontend\\MessageController::actionCommonMessages","ip":"192.168.10.10"} []
[2018-10-18 16:55:40] SD.ERROR: WORKER Error Undefined variable: receiverID (/home/vagrant/code/message/src/app/Models/MessageModel.php:168) [] []
[2018-10-18 16:55:40] SD.ERROR: WORKER EXIT UNEXPECTED Uncaught Error: Call to undefined method app\Services\MessageService::combineMessages() in /home/vagrant/code/message/src/app/Services/MessageService.php:119 Stack trace: #0 [internal function]: app\Services\MessageService->getCommonMessages('0') #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(95): Generator->send(Array) #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(96): Server\Coroutine\CoroutineTask->run() #3 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(74): Server\Coroutine\CoroutineTask->run() #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #6 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->S (/home/vagrant/code/message/src/app/Services/MessageService.php:119) Stack trace: #0 unknown(0): app\AppServer->checkErrors()  [] []
[2018-10-18 16:55:40] SD.ALERT: WORKER Error {"worker_id":1,"worker_pid":1400,"exit_code":255} [] []
[2018-10-18 16:56:32] SD.ERROR: WORKER Error Undefined variable: receiverID (/home/vagrant/code/message/src/app/Models/MessageModel.php:168) [] []
[2018-10-18 16:56:32] SD.ERROR: WORKER Error Undefined variable: receiverID (/home/vagrant/code/message/src/app/Models/MessageModel.php:168) [] []
[2018-10-18 17:01:49] SD.ERROR: WORKER Error Undefined variable: receiverID (/home/vagrant/code/message/src/app/Models/MessageModel.php:168) [] []
[2018-10-18 17:01:50] SD.ERROR: WORKER Error Undefined variable: receiverID (/home/vagrant/code/message/src/app/Models/MessageModel.php:168) [] []
[2018-10-18 17:12:13] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:231) [] []
[2018-10-18 17:12:13] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:231) [] []
[2018-10-18 17:13:43] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:231) [] []
[2018-10-18 17:13:44] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:231) [] []
[2018-10-18 17:15:06] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:232) [] []
[2018-10-18 17:15:07] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:232) [] []
[2018-10-18 17:18:52] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:232) [] []
[2018-10-18 17:18:53] SD.ERROR: WORKER Error A non well formed numeric value encountered (/home/vagrant/code/message/src/app/Models/MessageModel.php:232) [] []
[2018-10-18 17:39:48] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 17:39:49] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:40:56] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:40:56] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:41:46] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:41:46] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:42:17] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:42:17] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:44:33] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:44:33] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:44:35] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:35] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:35] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:37] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:37] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:37] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:37] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:38] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:38] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:38] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:47:38] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:49:04] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:49:04] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:22] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:22] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:42] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:43] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:43] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:44] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:44] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:50:44] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:52:22] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:52:22] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:52:42] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:52:42] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:54:18] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:54:18] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:55:01] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:55:01] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/Frontend/AccountController.php:53) [] []
[2018-10-18 19:55:01] SD.ERROR: WORKER EXIT UNEXPECTED Uncaught Error: Cannot use object of type Generator as array in /home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:60 Stack trace: #0 /home/vagrant/code/message/src/app/Controllers/Api/Frontend/AccountController.php(54): app\Controllers\Api\BaseController->autoReturn(Object(Generator)) #1 [internal function]: app\Controllers\Api\Frontend\AccountController->actionLogout() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Components/AOP/Proxy.php(31): call_user_func_array(Array, Array) #3 [internal function]: Server\Components\AOP\Proxy->__call('actionLogout', Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/CoreBase/Controller.php(163): call_user_func(Array) #5 [internal function]: Server\CoreBase\Controller->execute('Api\\Frontend\\Ac...', 'actionLogout', NULL) #6 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(95): Generator->send(NULL) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistr (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:60) Stack trace: #0 unknown(0): app\AppServer->checkErrors()  [] []
[2018-10-18 19:55:01] SD.ALERT: WORKER Error {"worker_id":3,"worker_pid":5265,"exit_code":255} [] []
[2018-10-18 19:55:38] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:55:38] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/Frontend/AccountController.php:53) [] []
[2018-10-18 19:55:39] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/Frontend/AccountController.php:53) [] []
[2018-10-18 19:56:44] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:56:44] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/Frontend/AccountController.php:53) [] []
[2018-10-18 19:56:44] SD.ERROR: WORKER Error Undefined index: token (/home/vagrant/code/message/src/app/Controllers/Api/Frontend/AccountController.php:53) [] []
[2018-10-18 19:57:20] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:57:47] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 19:58:43] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 20:00:07] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 20:02:13] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 20:02:49] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 20:03:50] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 22:19:07] SD.ERROR: [mysql]:Incorrect integer value: 'token_expiretime+1800' for column 'token_expiretime' at row 1[sql]:UPDATE xieqiaomin_admin SET token_expiretime = 'token_expiretime+1800' WHERE token = '$2y$10$GW4tu7GnLO4LGH7.ToVB2eT4PDjXDRkB8rhdNNS5y2fhOyA/PU5YK' AND token_expiretime > '1539872347' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\AccountController::setRequestResponse","app\\Models\\AdminModel::findByToken","app\\Models\\AdminModel::extendTokenExpiretime","app\\Controllers\\Api\\Backend\\AccountController::onExceptionHandle"],"start_time":"2018-10-18 22:19:07","request_id":"15398723472845631095","controller_name":"Api\\Backend\\AccountController","method_name":"Api\\Backend\\AccountController::actionInfo","ip":"192.168.10.10"} []
[2018-10-18 22:19:53] SD.ERROR: [mysql]:Incorrect integer value: 'token_expiretime+1800' for column 'token_expiretime' at row 1[sql]:UPDATE xieqiaomin_admin SET token_expiretime = 'token_expiretime+1800' WHERE token = '$2y$10$OWyWLJiOLkCE62PA9y1V6eQPvuf.VmSILJvdQ/lZ1DpA.aZYRYYIS' AND token_expiretime > '1539872393' #0 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineTask.php(69): Server\Asyn\Mysql\MySqlCoroutine->getResult() #1 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Coroutine/CoroutineBase.php(145): Server\Coroutine\CoroutineTask->run() #2 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MySqlCoroutine.php(46): Server\Coroutine\CoroutineBase->immediateExecution() #3 [internal function]: Server\Asyn\Mysql\MySqlCoroutine->Server\Asyn\Mysql\{closure}(Array) #4 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/AsynPool.php(112): call_user_func(Object(Closure), Array) #5 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Asyn/Mysql/MysqlAsynPool.php(181): Server\Asyn\AsynPool->distribute(Array) #6 [internal function]: Server\Asyn\Mysql\MysqlAsynPool->Server\Asyn\Mysql\{closure}(Object(swoole_mysql), false) #7 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleWebSocketServer.php(76): swoole_http_server->start() #8 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/SwooleDistributedServer.php(149): Server\SwooleWebSocketServer->start() #9 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(349): Server\SwooleDistributedServer->start() #10 /home/vagrant/code/message/vendor/tmtbe/swooledistributed/src/Server/Start.php(82): Server\Start::startSwoole() #11 /home/vagrant/code/message/bin/start_swoole_server.php(12): Server\Start::run() #12 {main} {"RunStack":["Server\\Middlewares\\MonitorMiddleware::before_handle","Server\\Middlewares\\NormalHttpMiddleware::before_handle","app\\Middlewares\\ParamsMiddleware::before_handle","app\\Controllers\\Api\\Backend\\AccountController::setRequestResponse","app\\Models\\AdminModel::findByToken","app\\Models\\AdminModel::extendTokenExpiretime","app\\Controllers\\Api\\Backend\\AccountController::onExceptionHandle"],"start_time":"2018-10-18 22:19:53","request_id":"15398723932540853970","controller_name":"Api\\Backend\\AccountController","method_name":"Api\\Backend\\AccountController::actionInfo","ip":"192.168.10.10"} []
[2018-10-18 22:24:30] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 22:24:30] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 22:24:33] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 22:25:01] SD.ERROR: WORKER Error Undefined index: title (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 22:25:01] SD.ERROR: WORKER Error Undefined index: content (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 22:26:13] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 22:26:13] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 22:26:14] SD.ERROR: WORKER Error Undefined index: error (/home/vagrant/code/message/src/app/Services/UploadService.php:25) [] []
[2018-10-18 22:26:18] SD.ERROR: WORKER Error Undefined index: title (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 22:26:18] SD.ERROR: WORKER Error Undefined index: content (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
[2018-10-18 22:27:06] SD.ERROR: WORKER Error Undefined index: user-token (/home/vagrant/code/message/src/app/Controllers/Api/BaseController.php:148) [] []
